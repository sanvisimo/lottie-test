// Import the required modules
import * as fs from 'fs';
import { PutObjectCommand, S3Client } from "@aws-sdk/client-s3";
import chromium from '@sparticuz/chromium';
import renderLottie from 'puppeteer-lottie'
import { APIGatewayProxyEventV2, Context, APIGatewayProxyResult } from "aws-lambda";

const file = {"v":"5.9.0","fr":25,"ip":0,"op":75,"w":800,"h":800,"nm":"Animation Test","ddd":0,"assets":[],"fonts":{"list":[{"fName":"Roboto-Black","fFamily":"Roboto","fStyle":"Black","ascent":75}]},"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"TJS Logo/Logo TJS Outlines","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":52,"s":[400,502.5,0],"to":[0,0,0],"ti":[0,0,0]},{"t":60,"s":[400,445.5,0]}],"ix":2,"l":2},"a":{"a":0,"k":[584,511.5,0],"ix":1,"l":2},"s":{"a":0,"k":[17.466,17.466,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,25.768],[0,0],[0,0],[0,0]],"o":[[-25.768,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-38.521,75.783],[-85.256,29.048],[-85.256,-75.783],[85.256,-75.783],[85.256,75.783]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.721568627451,0.960784373564,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[553.328,92.809],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,66.588],[0,0],[-26.039,0],[0,0],[0,0],[178.335,0]],"o":[[0,0],[0,0],[81.463,0],[0,0],[0,-26.117],[0,0],[0,0],[0,172.015],[0,0]],"v":[[-202.085,286.763],[-202.085,122.57],[-92.83,122.57],[31.572,-4.362],[31.572,-239.399],[78.809,-286.763],[202.085,-286.763],[202.085,12.055],[-82.729,286.763]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.721568627451,0.960784373564,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[436.498,735.118],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[64.45,0],[0,0],[0,0],[0,0],[0,64.446],[0,0],[0,0],[0,0],[-64.451,0],[0,0],[0,0],[0,0],[0,-60.94],[0,0],[33.229,-3.605]],"o":[[0,0],[0,-64.513],[0,0],[0,0],[0,0],[64.45,0],[0,0],[0,0],[0,0],[0,64.446],[0,0],[0,0],[0,0],[-64.451,0],[0,0],[0,37.133],[0,0]],"v":[[-341.584,388.441],[-341.584,97.317],[-454.625,-15.85],[-575.747,-15.85],[-575.747,-173.727],[-454.625,-173.727],[-341.584,-286.772],[-341.584,-388.441],[-171.079,-388.441],[-171.079,-286.772],[-60.69,-173.727],[575.747,-173.727],[575.747,-15.85],[-60.69,-15.85],[-171.079,90.252],[-171.079,325.289],[-222.596,388.441]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.721568627451,0.960784373564,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[575.997,405.468],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[17.48,0],[14.142,8.226],[7.963,14.142],[0,16.97],[-7.975,14.141],[-14.129,8.227],[-17.484,0],[-14.145,-8.221],[-7.975,-14.138],[0,-16.965],[7.963,-14.137],[14.138,-8.226]],"o":[[-17.484,0],[-14.129,-8.226],[-7.975,-14.137],[0,-16.965],[7.963,-14.138],[14.142,-8.221],[17.48,0],[14.138,8.227],[7.963,14.141],[0,16.97],[-7.975,14.142],[-14.145,8.226]],"v":[[-0.004,92.546],[-47.438,80.21],[-80.591,46.659],[-92.549,0.002],[-80.591,-46.659],[-47.438,-80.206],[-0.004,-92.546],[47.429,-80.206],[80.592,-46.659],[92.548,0.002],[80.592,46.659],[47.429,80.21]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-12.682,0],[-10.368,6.343],[-5.919,10.796],[0,12.851],[5.912,10.795],[10.368,6.343],[12.678,0],[10.368,-6.339],[5.912,-10.799],[0,-12.854],[-5.907,-10.795],[-10.372,-6.335]],"o":[[12.678,0],[10.368,-6.335],[5.912,-10.795],[0,-12.854],[-5.919,-10.799],[-10.368,-6.339],[-12.682,0],[-10.372,6.343],[-5.907,10.795],[0,12.851],[5.912,10.796],[10.368,6.343]],"v":[[-0.004,70.697],[34.571,61.185],[58.997,35.478],[67.863,0.002],[58.997,-35.471],[34.571,-61.18],[-0.004,-70.694],[-34.579,-61.18],[-59.002,-35.471],[-67.875,0.002],[-59.002,35.478],[-34.579,61.185]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ind":2,"ty":"sh","ix":3,"ks":{"a":0,"k":{"i":[[0,0],[7.202,3.856],[4.029,6.856],[0,8.571],[-4.033,6.857],[-7.194,3.856],[-9.093,0],[0,0],[0,0],[0,0],[4.029,-2.055],[2.137,-3.511],[0,-4.283],[-2.146,-3.511],[-4.028,-1.965],[-5.142,0],[0,0],[0,0]],"o":[[-9.093,0],[-7.194,-3.856],[-4.033,-6.853],[0,-8.567],[4.029,-6.849],[7.202,-3.856],[0,0],[0,0],[0,0],[-5.142,0],[-4.028,2.06],[-2.146,3.515],[0,4.461],[2.137,3.515],[4.029,1.973],[0,0],[0,0],[0,0]],"v":[[7.453,44.992],[-16.97,39.206],[-33.81,23.138],[-39.847,0.002],[-33.81,-23.134],[-16.97,-39.201],[7.453,-44.987],[28.275,-44.987],[28.275,-23.134],[9.512,-23.134],[-4.245,-20.051],[-13.494,-11.695],[-16.715,0.002],[-13.494,11.955],[-4.245,20.18],[9.512,23.138],[28.275,23.138],[28.275,44.992]],"c":true},"ix":2},"nm":"Path 3","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[0.721568627451,0.960784373564,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1074.989,92.797],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":5,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,19.445],[14.867,0],[0,0],[4.883,72.97],[0,0],[0,0]],"o":[[0,0],[0,0],[16.064,0],[0,-19.449],[0,0],[-74.194,0],[0,0],[0,0],[0,0]],"v":[[-225.009,172.776],[-225.009,21.214],[33.474,21.214],[66.182,-10.36],[34.671,-41.942],[-84.69,-41.942],[-224.687,-172.776],[225.009,-172.776],[225.009,172.776]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.721568627451,0.960784373564,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[926.735,621.133],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false}],"ip":55,"op":75,"st":52,"bm":0},{"ddd":0,"ind":2,"ty":5,"nm":"Hello from","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":51,"s":[402,412,0],"to":[0,0,0],"ti":[0,0,0]},{"t":59,"s":[402,320,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":1,"k":[{"i":{"x":[0.16,0.16,0.16],"y":[1,1,1]},"o":{"x":[0.84,0.84,0.84],"y":[0,0,0]},"t":51,"s":[100,100,100]},{"t":59,"s":[77,77,100]}],"ix":6,"l":2}},"ao":0,"hasMask":true,"masksProperties":[{"inv":false,"mode":"a","pt":{"a":1,"k":[{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":32,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-698,-194],[-1543,-194],[-1543,158],[-698,158]],"c":true}]},{"t":47,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[298,-194],[-305,-194],[-305,158],[298,158]],"c":true}]}],"ix":1},"o":{"a":0,"k":100,"ix":3},"x":{"a":0,"k":0,"ix":4},"nm":"Mask 1"}],"t":{"d":{"k":[{"s":{"s":60,"f":"Roboto-Black","t":"Hello from","ca":0,"j":2,"tr":-24,"lh":61,"ls":0,"fc":[0.722,0.961,0]},"t":0}]},"p":{},"m":{"g":1,"a":{"a":0,"k":[0,0],"ix":2}},"a":[]},"ip":40,"op":75,"st":41,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Rect Viola","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":32,"s":[-975,651,0],"to":[0,0,0],"ti":[0,0,0]},{"t":47,"s":[142,651,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":1,"k":[{"i":{"x":[0.16,0.16],"y":[1,1]},"o":{"x":[0.84,0.84],"y":[0,0]},"t":32,"s":[844,603]},{"i":{"x":[0.833,0.833],"y":[1,1]},"o":{"x":[0.167,0.167],"y":[0,0]},"t":47,"s":[603,603]},{"i":{"x":[0.16,0.16],"y":[1,1]},"o":{"x":[0.84,0.84],"y":[0,0]},"t":51,"s":[603,603]},{"t":58,"s":[640,640]}],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":1,"k":[{"i":{"x":[0.16],"y":[1]},"o":{"x":[0.84],"y":[0]},"t":32,"s":[200]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":47,"s":[90]},{"i":{"x":[0.16],"y":[1]},"o":{"x":[0.84],"y":[0]},"t":51,"s":[90]},{"t":58,"s":[35]}],"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"st","c":{"a":0,"k":[0.486274988511,0.345097979377,0.113724996529,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.611764705882,0.309803921569,0.909803981407,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[257,-254],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":32,"op":75,"st":32,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Rect Verde","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":16,"s":[-228,-635,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":31,"s":[-228,537,0],"to":[0,0,0],"ti":[0,0,0]},{"t":46,"s":[986,537,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[900,923],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":200,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"st","c":{"a":0,"k":[0.486274988511,0.345097979377,0.113724996529,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.721568627451,0.960784373564,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[271,-278],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":16,"op":75,"st":16,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Rect Magenta","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":0,"s":[942,-109,0],"to":[0,0,0],"ti":[0,0,0]},{"i":{"x":0.16,"y":1},"o":{"x":0.84,"y":0},"t":15,"s":[400,400,0],"to":[0,0,0],"ti":[0,0,0]},{"t":30,"s":[986,1250,0]}],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[900,923],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":200,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"st","c":{"a":0,"k":[0.486274988511,0.345097979377,0.113724996529,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.921568687289,0,0.364705882353,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[271,-278],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":75,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400,400,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ty":"rc","d":1,"s":{"a":0,"k":[800,800],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"r":{"a":0,"k":0,"ix":4},"nm":"Rectangle Path 1","mn":"ADBE Vector Shape - Rect","hd":false},{"ty":"st","c":{"a":0,"k":[0.486274988511,0.345097979377,0.113724996529,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":0,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[0.098039223166,0.109803929048,0.113725497676,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Rectangle 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":75,"st":0,"bm":0}],"markers":[],"chars":[{"ch":"H","size":60,"style":"Black","w":70.26,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[64.795,-71.094],[47.754,-71.094],[47.754,-42.871],[22.51,-42.871],[22.51,-71.094],[5.371,-71.094],[5.371,0],[22.51,0],[22.51,-29.688],[47.754,-29.688],[47.754,0],[64.795,0]],"c":true},"ix":2},"nm":"H","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"H","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Roboto"},{"ch":"e","size":60,"style":"Black","w":54.44,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-3.76,1.676],[-2.051,2.832],[0,0],[5.208,0],[1.985,1.693],[0.586,2.962],[0,0],[0,0],[4.297,4.607],[7.422,0],[3.841,-2.262],[2.002,-4.134],[0,-5.403],[0,0],[-5.013,-4.834],[-8.105,0]],"o":[[3.76,-1.676],[0,0],[-2.93,3.646],[-3.158,0],[-1.986,-1.692],[0,0],[0,0],[0,-8.235],[-4.297,-4.606],[-5.273,0],[-3.841,2.263],[-2.002,4.134],[0,0],[0,7.748],[5.013,4.834],[4.329,0]],"v":[[42.31,-1.538],[51.025,-8.301],[43.506,-17.188],[31.299,-11.719],[23.584,-14.258],[19.727,-21.24],[52.441,-21.24],[52.441,-27.637],[45.996,-46.899],[28.418,-53.809],[14.746,-50.415],[5.981,-40.82],[2.979,-26.514],[2.979,-25.146],[10.498,-6.274],[30.176,0.977]],"c":true},"ix":2},"nm":"e","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[-1.4,-1.448],[0.065,-2.637],[0,0],[0,0],[-4.818,0]],"o":[[1.399,1.449],[0,0],[0,0],[0.911,-6.38],[2.604,0]],"v":[[34.326,-38.94],[36.328,-32.812],[36.328,-31.543],[19.727,-31.543],[28.32,-41.113]],"c":true},"ix":2},"nm":"e","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"e","np":5,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Roboto"},{"ch":"l","size":60,"style":"Black","w":27.49,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[21.973,-75],[5.469,-75],[5.469,0],[21.973,0]],"c":true},"ix":2},"nm":"l","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"l","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Roboto"},{"ch":"o","size":60,"style":"Black","w":56.15,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-4.558,-4.508],[-7.52,0],[-4.574,4.834],[0,8.236],[0,0],[4.557,4.9],[7.91,0],[3.841,-2.213],[2.051,-4.118],[0,-5.273]],"o":[[0.358,7.715],[4.557,4.509],[7.812,0],[4.573,-4.834],[0,0],[0,-8.43],[-4.558,-4.899],[-5.176,0],[-3.841,2.214],[-2.051,4.118],[0,0]],"v":[[2.588,-24.121],[9.961,-5.786],[28.076,0.977],[46.655,-6.274],[53.516,-25.879],[53.516,-26.465],[46.68,-46.46],[27.979,-53.809],[14.453,-50.488],[5.615,-40.991],[2.539,-26.904]],"c":true},"ix":2},"nm":"o","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[-5.502,0],[0,-9.473],[0,0],[5.859,0],[1.53,2.279],[0,4.883]],"o":[[0.455,-8.17],[6.055,0],[0,0],[-0.13,9.017],[-2.995,0],[-1.53,-2.278],[0,0]],"v":[[19.043,-28.857],[27.979,-41.113],[37.061,-26.904],[37.061,-25.244],[28.076,-11.719],[21.289,-15.137],[18.994,-25.879]],"c":true},"ix":2},"nm":"o","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"o","np":5,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Roboto"},{"ch":" ","size":60,"style":"Black","w":24.9,"data":{},"fFamily":"Roboto"},{"ch":"f","size":60,"style":"Black","w":36.23,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[-4.98,0],[-1.009,-0.293],[0,0],[2.344,0],[3.548,-3.32],[0,-6.022],[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0],[0,-4.297],[1.692,0],[0,0],[-2.8,-0.684],[-6.413,0],[-3.548,3.32],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[24.756,0],[24.756,-41.406],[35.059,-41.406],[35.059,-52.832],[24.756,-52.832],[24.756,-56.885],[32.227,-63.33],[36.279,-62.891],[36.23,-75],[28.516,-76.025],[13.574,-71.045],[8.252,-57.031],[8.252,-52.832],[0.586,-52.832],[0.586,-41.406],[8.252,-41.406],[8.252,0]],"c":true},"ix":2},"nm":"f","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"f","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Roboto"},{"ch":"r","size":60,"style":"Black","w":37.89,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[1.758,0],[2.766,-5.176],[0,0],[0,0],[0,0],[0,0],[0,0],[-5.176,0],[0,0]],"o":[[-1.302,-0.391],[-4.948,0],[0,0],[0,0],[0,0],[0,0],[0,0],[1.465,-3.255],[0,0],[0,0]],"v":[[36.865,-53.223],[32.275,-53.809],[20.703,-46.045],[20.166,-52.832],[4.736,-52.832],[4.736,0],[21.191,0],[21.191,-33.447],[31.152,-38.33],[36.572,-37.939]],"c":true},"ix":2},"nm":"r","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"r","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Roboto"},{"ch":"m","size":60,"style":"Black","w":86.13,"data":{"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0],[0,0],[-3.158,0],[-0.879,-1.237],[0,-2.766],[0,0],[0,0],[0,0],[0,0],[-3.255,0],[-0.912,-1.237],[0,-2.702],[0,0],[0,0],[0,0],[10.709,0],[3.58,-5.305],[6.673,0],[3.743,-4.785],[0,0]],"o":[[0,0],[0,0],[0,0],[1.66,-2.897],[2.473,0],[0.879,1.237],[0,0],[0,0],[0,0],[0,0],[1.595,-2.897],[2.409,0],[0.911,1.237],[0,0],[0,0],[0,0],[-0.293,-12.955],[-6.771,0],[-2.344,-5.305],[-6.316,0],[0,0],[0,0]],"v":[[4.736,-52.832],[4.736,0],[21.191,0],[21.191,-36.768],[28.418,-41.113],[33.447,-39.258],[34.766,-33.252],[34.766,0],[51.27,0],[51.27,-36.084],[51.221,-36.768],[58.496,-41.113],[63.477,-39.258],[64.844,-33.35],[64.844,0],[81.348,0],[81.348,-34.375],[64.844,-53.809],[49.316,-45.85],[35.791,-53.809],[20.703,-46.631],[20.166,-52.832]],"c":true},"ix":2},"nm":"m","mn":"ADBE Vector Shape - Group","hd":false}],"nm":"m","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}]},"fFamily":"Roboto"}]}

// Initialize the AWS S3 SDK
const client = new S3Client({});

// AWS Lambda function
export const handler = async (event: APIGatewayProxyEventV2, context: Context) => {

    console.log('event',event)

    // Placeholder for S3 bucket name (to be filled)
    const bucketName = 'lottie-bucket' // S3 bucket name
    // Construct the S3 key using the hostname
    const s3Key = `screenshots/example.mp4`;

    try {
        fs.writeFileSync('/tmp/lottie.json', JSON.stringify(file))
        // Launch a headless Chrome browser using puppeteer
        await renderLottie({
            path: '/tmp/lottie.json',
            output: '/tmp/example.mp4',
            puppeteerOptions: {
                args: chromium.args,
                defaultViewport: chromium.defaultViewport,
                executablePath: await chromium.executablePath(),
                // executablePath: await chromium.executablePath(
                //     'https://github.com/Sparticuz/chromium/releases/download/v119.0.2/chromium-v119.0.2-pack.tar',
                // ),
                headless: true
            }
        })

        const commonData = {
            Bucket: bucketName,
            Key: s3Key,
        }

        const content = fs.readFileSync('/tmp/example.mp4');

        // Define parameters for the S3 upload
        const uploadCommand = new PutObjectCommand({
            ...commonData,
            Body: content
        });

        // Upload the screenshot to the S3 bucket
        await client.send(uploadCommand);
    } catch (error) {
        // Handle and log errors
        console.error('Error:', error);
        throw error;
    }
};
